# Luce Real Estate Platform - AI Coding Rules

This document defines the coding standards, technology stack, and best practices for the "Nhà giao dịch bất động sản thông minh" project. All AI agents must follow these rules.

## 1. Technology Stack

- **Frontend Framework**: React 19 + TypeScript (Vite).
- **Styling**: Tailwind CSS (v3.4)
  - **IMPORTANT**: Tailwind is loaded via CDN in `index.html`. 
  - Do NOT import `tailwindcss` in JS/TS files.
  - Do NOT run `npx tailwindcss init`.
  - Use `className` with standard Tailwind utility classes.
  - Custom colors (`primary`, `accent`, etc.) are defined in the `script` tag in `index.html`.
- **Backend Service**: Firebase v12
  - **Auth**: `firebase/auth`
  - **Database**: `firebase/firestore` (Firestore)
  - **Storage**: `firebase/storage`
  - **Functions**: `firebase/functions`
- **Routing**: `react-router-dom` v7.
- **Icons**: Material Symbols Outlined (Google Fonts).

## 2. Project Structure

```
/src
  /components     # Reusable UI components (Buttons, Headers, Cards)
  /contexts       # proper Context API usage (Auth, Branding)
  /hooks          # Custom React hooks (useAnalytics, etc.)
  /pages          # Main page components (mapped to Routes)
  /services       # Logic layers (AiNewsAgent, Logger)
  /firebase.ts    # Firebase initialization (Single Source of Truth)
```

## 3. Coding Standards

### React Components
- Use **Functional Components** with `React.FC<Props>`.
- Always type props properly with `interface`.
- Use `useEffect` for side effects, but ensure dependency arrays are correct.
- **Null Safety**: Always handle `null` or `undefined` data from Firebase, especially for async data loading.
- **Loading States**: Always implement `loading` states for async operations to improve UX.

### Firebase Interactions
- **Modular SDK**: Use the modular import style (e.g., `import { doc, getDoc } from 'firebase/firestore'`).
- **Error Handling**: Wrap all Firebase calls in `try/catch` blocks and log errors to console or a UI toast.
- **Security**:
  - Do not hardcode sensitive secrets in frontend code.
  - Respect the `firestore.rules` structure (read public, write authenticated/staff).

### Styling Guidelines (Tailwind)
- Use arbitrary values sparingly `w-[350px]`. Prefer standard spacing `w-80`, `w-96`.
- Use the custom color palette defined in `index.html`:
  - `bg-primary`, `text-primary` (Dark Teal)
  - `bg-accent`, `text-accent` (Teal/Green)
  - `font-display` for Headings, `font-body` for Text.
- **Animations**: Use `animate-spin` for loading, or custom classes `animate-in` defined in global CSS.

## 4. Common Patterns

- **Master Layout**: Most pages should be wrapped or include the `Navigation` and `Footer` unless it's a standalone page like `ProjectLanding`.
- **Form Handling**: Controlled components (`useState` for inputs) are preferred for simple forms.
- **Images**: Always provide an `alt` tag. Use `object-cover` for product images.

## 5. Deployment
- **Build**: `npm run build` (uses Vite).
- **Deploy**: `firebase deploy`.

---
*Generated by Antigravity Agent*
